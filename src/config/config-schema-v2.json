{
  "$ref": "#/definitions/Config",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "ActionConfig": {
      "additionalProperties": false,
      "description": "Represents a config to perform a certain action for a GMail thread/message/attachment.",
      "properties": {
        "args": {
          "additionalProperties": {},
          "description": "The arguments for a certain action",
          "title": "args",
          "type": "object"
        },
        "description": {
          "default": "",
          "description": "The description for the action",
          "title": "description",
          "type": "string"
        },
        "name": {
          "default": "",
          "description": "The name of the action to be executed",
          "title": "name",
          "type": "string"
        }
      },
      "required": ["name"],
      "title": "ActionConfig",
      "type": "object"
    },
    "AttachmentConfig": {
      "additionalProperties": false,
      "description": "Represents a config to handle a certain GMail attachment",
      "properties": {
        "actions": {
          "default": [],
          "description": "The list actions to be executed for their respective handler scopes",
          "items": {
            "$ref": "#/definitions/ActionConfig"
          },
          "title": "actions",
          "type": "array"
        },
        "description": {
          "default": "",
          "description": "The description of the attachment handler config",
          "title": "description",
          "type": "string"
        },
        "match": {
          "$ref": "#/definitions/AttachmentMatchConfig",
          "description": "Specifies which attachments match for further processing",
          "title": "match"
        },
        "name": {
          "default": "",
          "description": "The unique name of the attachment config (will be generated if not set)",
          "title": "name",
          "type": "string"
        }
      },
      "title": "AttachmentConfig",
      "type": "object"
    },
    "AttachmentMatchConfig": {
      "additionalProperties": false,
      "description": "Represents a config to match a certain GMail attachment",
      "properties": {
        "contentType": {
          "default": ".*",
          "description": "A RegEx matching the content type of the attachment",
          "title": "contentType",
          "type": "string"
        },
        "includeAttachments": {
          "default": true,
          "description": "Should regular attachments be included in attachment processing (default: true)",
          "title": "includeAttachments",
          "type": "boolean"
        },
        "includeInlineImages": {
          "default": true,
          "description": "Should inline images be included in attachment processing (default: true)",
          "title": "includeInlineImages",
          "type": "boolean"
        },
        "largerThan": {
          "default": -1,
          "description": "Only include attachments larger than the given size in bytes",
          "title": "largerThan",
          "type": "number"
        },
        "name": {
          "default": "(.*)",
          "description": "A RegEx matching the name of the attachment",
          "title": "name",
          "type": "string"
        },
        "smallerThan": {
          "default": -1,
          "description": "Only include attachments smaller than the given size in bytes",
          "title": "smallerThan",
          "type": "number"
        }
      },
      "title": "AttachmentMatchConfig",
      "type": "object"
    },
    "Config": {
      "additionalProperties": false,
      "description": "Represents a configuration for GMail2GDrive",
      "properties": {
        "attachments": {
          "default": [],
          "description": "The list of handler that define the way attachments are processed",
          "items": {
            "$ref": "#/definitions/AttachmentConfig"
          },
          "title": "attachments",
          "type": "array"
        },
        "description": {
          "default": "",
          "description": "The description of the GMail2GDrive config",
          "title": "description",
          "type": "string"
        },
        "global": {
          "$ref": "#/definitions/GlobalConfig",
          "description": "The global configuration that defines matching for all threads as well as actions for all threads, messages or attachments.",
          "title": "global"
        },
        "messages": {
          "default": [],
          "description": "The list of handler that define the way nested messages or attachments are processed",
          "items": {
            "$ref": "#/definitions/MessageConfig"
          },
          "title": "messages",
          "type": "array"
        },
        "settings": {
          "$ref": "#/definitions/SettingsConfig",
          "description": "Represents a settings config that affect the way GMail2GDrive works.",
          "title": "settings"
        },
        "threads": {
          "default": [],
          "description": "The list of handler that define the way nested threads, messages or attachments are processed",
          "items": {
            "$ref": "#/definitions/ThreadConfig"
          },
          "title": "threads",
          "type": "array"
        }
      },
      "title": "Config",
      "type": "object"
    },
    "GlobalConfig": {
      "additionalProperties": false,
      "description": "The global configuration that defines matching for all threads as well as actions for all threads, messages or attachments.",
      "properties": {
        "actions": {
          "default": [],
          "description": "The list of global actions that are always executed for their respective handler scopes",
          "items": {
            "$ref": "#/definitions/ActionConfig"
          },
          "title": "actions",
          "type": "array"
        },
        "match": {
          "$ref": "#/definitions/ThreadMatchConfig",
          "description": "The global thread matching parameters applied in addition to each thread configuration",
          "title": "match"
        }
      },
      "title": "GlobalConfig",
      "type": "object"
    },
    "MessageConfig": {
      "additionalProperties": false,
      "description": "Represents a config to handle a certain GMail message",
      "properties": {
        "actions": {
          "default": [],
          "description": "The list actions to be executed for their respective handler scopes",
          "items": {
            "$ref": "#/definitions/ActionConfig"
          },
          "title": "actions",
          "type": "array"
        },
        "attachments": {
          "default": [],
          "description": "The list of handler that define the way attachments are processed",
          "items": {
            "$ref": "#/definitions/AttachmentConfig"
          },
          "title": "attachments",
          "type": "array"
        },
        "description": {
          "default": "",
          "description": "The description of the message handler config",
          "title": "description",
          "type": "string"
        },
        "match": {
          "$ref": "#/definitions/MessageMatchConfig",
          "description": "Specifies which attachments match for further processing",
          "title": "match"
        },
        "name": {
          "default": "",
          "description": "The unique name of the message config (will be generated if not set)",
          "title": "name",
          "type": "string"
        }
      },
      "title": "MessageConfig",
      "type": "object"
    },
    "MessageFlag": {
      "enum": ["read", "starred", "unread", "unstarred"],
      "title": "MessageFlag",
      "type": "string"
    },
    "MessageMatchConfig": {
      "additionalProperties": false,
      "description": "Represents a config to match a certain GMail message",
      "properties": {
        "from": {
          "default": ".*",
          "title": "from",
          "type": "string"
        },
        "is": {
          "default": [],
          "description": "A list of properties matching messages should have",
          "items": {
            "$ref": "#/definitions/MessageFlag"
          },
          "title": "is",
          "type": "array"
        },
        "newerThan": {
          "default": "",
          "description": "A relative date/time according to https://github.com/cmaurer/relative.time.parser#readme or an RFC 3339 date/time format matching messages newer than the given date/time",
          "title": "newerThan",
          "type": "string"
        },
        "olderThan": {
          "default": "",
          "description": "An RFC 3339 date/time format matching messages older than the given date/time",
          "title": "olderThan",
          "type": "string"
        },
        "subject": {
          "default": ".*",
          "description": "A RegEx matching the subject of messages",
          "title": "subject",
          "type": "string"
        },
        "to": {
          "default": ".*",
          "description": "A RegEx matching the recipient email address of messages",
          "title": "to",
          "type": "string"
        }
      },
      "title": "MessageMatchConfig",
      "type": "object"
    },
    "SettingsConfig": {
      "additionalProperties": false,
      "description": "Represents a settings config that affect the way GMail2GDrive works.",
      "properties": {
        "logSheetFile": {
          "default": "Gmail2GDrive/Gmail2GDrive-logs",
          "description": "Path of the spreadsheet log file",
          "title": "logSheetFile",
          "type": "string"
        },
        "logSheetFolderId": {
          "default": "",
          "description": "Folder ID of the spreadsheet log file in case of a shared drive (instead of logSheetFile)",
          "title": "logSheetFolderId",
          "type": "string"
        },
        "maxBatchSize": {
          "default": 10,
          "description": "The maximum batch size of threads to process in a single run to respect Google processing limits",
          "title": "maxBatchSize",
          "type": "number"
        },
        "maxRuntime": {
          "default": 280,
          "description": "The maximum runtime in seconds for a single run to respect Google processing limits",
          "title": "maxRuntime",
          "type": "number"
        },
        "processedLabel": {
          "default": "to-gdrive/processed",
          "description": "The label to be added to processed GMail threads (only for markProcessedMode=\"label\", deprecated - only for compatibility to v1)",
          "title": "processedLabel",
          "type": "string"
        },
        "processedMode": {
          "default": "read",
          "description": "The mode to mark processed threads/messages.\n* `label`: Add the label from `processedLabel` to the thread. This is just for compatibility to v1 and is limited to one message per thread.\n* `read`: Mark the message as read. This is the new default since it provides more flexibility esp. when threads contain multiple messages.",
          "enum": ["label", "read"],
          "title": "processedMode",
          "type": "string"
        },
        "sleepTimeAttachments": {
          "default": 0,
          "description": "The sleep time in milliseconds between processing each attachment",
          "title": "sleepTimeAttachments",
          "type": "number"
        },
        "sleepTimeMessages": {
          "default": 0,
          "description": "The sleep time in milliseconds between processing each message",
          "title": "sleepTimeMessages",
          "type": "number"
        },
        "sleepTimeThreads": {
          "default": 100,
          "description": "The sleep time in milliseconds between processing each thread",
          "title": "sleepTimeThreads",
          "type": "number"
        },
        "timezone": {
          "description": "Overrides the <a href=\"https://developers.google.com/apps-script/reference/base/session#getscripttimezone\">script timezone</a>, which is used by default.",
          "title": "timezone",
          "type": "string"
        }
      },
      "title": "SettingsConfig",
      "type": "object"
    },
    "ThreadConfig": {
      "additionalProperties": false,
      "description": "Represents a config handle a certain GMail thread",
      "properties": {
        "actions": {
          "default": [],
          "description": "The list actions to be executed for their respective handler scopes",
          "items": {
            "$ref": "#/definitions/ActionConfig"
          },
          "title": "actions",
          "type": "array"
        },
        "attachments": {
          "default": [],
          "description": "The list of handler that define the way attachments are processed",
          "items": {
            "$ref": "#/definitions/AttachmentConfig"
          },
          "title": "attachments",
          "type": "array"
        },
        "description": {
          "default": "",
          "description": "The description of the thread handler config",
          "title": "description",
          "type": "string"
        },
        "match": {
          "$ref": "#/definitions/ThreadMatchConfig",
          "description": "Specifies which threads match for further processing",
          "title": "match"
        },
        "messages": {
          "default": [],
          "description": "The list of handler that define the way nested messages or attachments are processed",
          "items": {
            "$ref": "#/definitions/MessageConfig"
          },
          "title": "messages",
          "type": "array"
        },
        "name": {
          "default": "",
          "description": "The unique name of the thread config (will be generated if not set)",
          "title": "name",
          "type": "string"
        }
      },
      "title": "ThreadConfig",
      "type": "object"
    },
    "ThreadMatchConfig": {
      "additionalProperties": false,
      "description": "Represents a config to match a certain GMail thread",
      "properties": {
        "maxMessageCount": {
          "default": -1,
          "description": "The maximum number of messages a matching thread is allowed to have",
          "title": "maxMessageCount",
          "type": "number"
        },
        "minMessageCount": {
          "default": 1,
          "description": "The minimum number of messages a matching thread must have",
          "title": "minMessageCount",
          "type": "number"
        },
        "newerThan": {
          "default": "",
          "description": "Only process threads with message newer than (leave empty for no restriction; use d, m and y for day, month and year)",
          "title": "newerThan",
          "type": "string"
        },
        "query": {
          "default": "",
          "description": "The GMail search query to find threads to be processed (see http://support.google.com/mail/bin/answer.py?hl=en&answer=7190 for details)",
          "title": "query",
          "type": "string"
        }
      },
      "title": "ThreadMatchConfig",
      "type": "object"
    }
  }
}
